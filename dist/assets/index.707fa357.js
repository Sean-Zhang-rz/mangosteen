import{d as y,z as g,e as a,r as k,c as h,S as v,P as V,U as S}from"./index.1c216f5b.js";import{D}from"./index.ff0fad93.js";const O="_form_az2vk_1",T={form:O},j=(e,u)=>{const r={},w=Object.keys(e);return u.map(i=>{var m,_,f,n,c;const{key:o,type:s,message:t}=i;if(w.indexOf(o)>-1){const p=(m=e[o])==null?void 0:m.toString().trim();switch(s){case"required":b(p)&&(r[o]=(_=r[o])!=null?_:[],(f=r[o])==null||f.push(t));break;case"pattern":!b(p)&&i.type==="pattern"&&!i.regex.test(p.toString())&&(r[o]=(n=r[o])!=null?n:[],(c=r[o])==null||c.push(t));break;default:return}}}),r};function b(e){return e==null||e===""}const G=y({props:{formData:{type:Object,required:!0},rules:{type:Array},onSubmit:{type:Function}},setup:(e,u)=>{const r=g({}),w=o=>{var t;o.preventDefault(),i()&&((t=e.onSubmit)==null||t.call(e,o))},i=()=>{if(e.formData&&e.rules){Object.keys(e.formData).forEach(s=>{r[s]=void 0});const o=j(e.formData,e.rules);return Object.keys(o).length?(Object.assign(r,o),!1):!0}};return()=>{var o,s;return a("form",{class:T.form,onSubmit:w},[(s=(o=u.slots).default)==null?void 0:s.call(o).map(t=>{var d,m,_,f;return a(t,{modelValue:e.formData[(d=t==null?void 0:t.props)==null?void 0:d.prop],"onUpdate:modelValue":n=>{var c;return e.formData[(c=t==null?void 0:t.props)==null?void 0:c.prop]=n},error:r[(m=t==null?void 0:t.props)==null?void 0:m.prop]?(f=r[(_=t==null?void 0:t.props)==null?void 0:_.prop])==null?void 0:f[0]:"\u3000"},null)})])}}}),C="_tips_6tkww_1",F="_form_row_6tkww_6",I="_form_item_6tkww_10",A="_select_6tkww_14",H="_input_6tkww_21",P="_input_with_button_6tkww_31",U="_error_6tkww_34",q="_form_item_value_6tkww_37",x="_form_item_errorHint_6tkww_41",z="_actions_6tkww_47",E="_removeTags_6tkww_52",N="_removeTagsAndItems_6tkww_53",K="_slots_button_6tkww_57",l={tips:C,form_row:F,form_item:I,select:A,input:H,input_with_button:P,error:U,form_item_value:q,form_item_errorHint:x,actions:z,removeTags:E,removeTagsAndItems:N,slots_button:K},J=y({props:{prop:{type:String},modelValue:{type:[String,Number]},label:{type:String},rule:{type:Object},type:{type:String},options:Array,error:String,placeholder:String,onClick:Function},emits:["update:modelValue"],setup:(e,u)=>{const r=k(!1),w=h(()=>{var s,t,d,m,_,f;const i=(t=(s=u.slots).default)==null?void 0:t.call(s),o=(m=(d=u.slots).button)==null?void 0:m.call(d);return a("div",{class:l.form_item_value},[i?i.map(n=>{var c;return a(n,{class:((c=e.error)==null?void 0:c.length)>1?l.error:""},null)}):a(v,null,[e.type==="select"?a("select",{class:[l.form_item,l.select],value:e.modelValue,onChange:n=>{u.emit("update:modelValue",n.target.value)}},[(_=e.options)==null?void 0:_.map(n=>a("option",{value:n.value},[n.text]))]):a(v,null,[" ",a("input",{value:e.modelValue,readonly:e.type==="date",placeholder:e.placeholder,onInput:n=>{u.emit("update:modelValue",n.target.value)},onClick:()=>{e.type==="date"&&(r.value=!0)},class:[l.form_item,l.input,o?l.input_with_button:"",((f=e.error)==null?void 0:f.length)>1?l.error:""]},null),e.type==="date"?a(V,{position:"bottom",show:r.value,"onUpdate:show":n=>r.value=n,teleport:"body"},{default:()=>[a(D,{modelValue:e.modelValue?new Date(e.modelValue):new Date,type:"date",title:"\u9009\u62E9\u5E74\u6708\u65E5",onConfirm:n=>{u.emit("update:modelValue",new S(n).format()),r.value=!1},onCancel:()=>r.value=!1},null)]}):null,o?a("div",{class:[l.slots_button]},[o]):null])])])});return()=>a("div",{class:l.form_row},[a("label",{class:l.form_label},[a("span",{class:l.form_item_name},[e.label]),w.value,a("div",{class:l.form_item_errorHint},[a("span",null,[e.error])])])])}});export{G as F,J as a};
